# Default values for FoodFund microservices
# Template configuration - SAFE TO COMMIT TO GIT
# For production/staging, use CI/CD secrets to override database values

global:
  # Docker registry - will be overridden by CI/CD
  imageRegistry: "phuoctmse"
  imagePullPolicy: IfNotPresent
  namespace: "foodfund"

# Auth Service
auth:
  enabled: true
  image:
    repository: "foodfund-auth"
    tag: "latest"
  
  replicaCount: 1
  
  service:
    type: ClusterIP
    port: 8002
    targetPort: 8002
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "150m"

  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "8002"

# GraphQL Gateway
gateway:
  enabled: true
  image:
    repository: "foodfund-graphql-gateway"
    tag: "latest"
  
  replicaCount: 1
  
  service:
    type: LoadBalancer
    port: 80
    targetPort: 8000
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "250m"

  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "8000"

# User Service
user:
  enabled: true
  image:
    repository: "foodfund-user"
    tag: "latest"
  
  replicaCount: 1
  
  service:
    type: ClusterIP
    port: 8003
    targetPort: 8003
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "150m"

  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "8003"

# Campaign Service (disabled by default - enable when ready)
campaign:
  enabled: false
  image:
    repository: "foodfund-campaign"
    tag: "latest"
  
  replicaCount: 1
  
  service:
    type: ClusterIP
    port: 8004
    targetPort: 8004
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "150m"

  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "8004"

# PostgreSQL Configuration (DISABLED - using Digital Ocean Database Cluster)
postgresql:
  enabled: false

# External Database Configuration (Digital Ocean Database Cluster)
# These values will be overridden by CI/CD secrets
externalDatabase:
  # Template values - DO NOT use in production
  host: "WILL_BE_SET_BY_CICD"
  port: 25060
  username: "WILL_BE_SET_BY_CICD"
  password: "WILL_BE_SET_BY_CICD"
  
  # Individual databases for each service
  databases:
    auth: "auth_db"
    user: "users_db" 
    campaign: "campaigns_db"
    default: "defaultdb"
  
  # SSL settings for Digital Ocean (required)
  ssl: true
  sslMode: "require"

# Ingress Configuration (disabled by default)
ingress:
  enabled: false
  className: "nginx"
  hosts:
    - host: api.foodfund.local
      paths:
        - path: /
          pathType: Prefix

# Service Account
serviceAccount:
  create: true
  name: "foodfund-sa"

# Network Policy (disabled by default)
networkPolicy:
  enabled: false
  allowExternal: true

# Namespace configuration
namespace:
  create: false  # Let CI/CD handle namespace creation

# AWS Configuration (for Auth service)
aws:
  region: "ap-southeast-1"
  cognito:
    userPoolId: "mock-user-pool-id"  # Will be overridden by CI/CD
    clientId: "mock-client-id"       # Will be overridden by CI/CD
    clientSecret: ""                 # Optional
  accessKeyId: ""                    # Optional
  secretAccessKey: ""                # Optional